{% extends 'base.html' %}

{% block title %}Eliminar Cita - MakiMotion{% endblock %}

{% block content %}
<div class="form-container">
    <div class="form-header">
        <h2>Confirmar Eliminación de Cita</h2>
        <p class="form-subtitle">Esta acción no se puede deshacer</p>
    </div>
    
    <div class="form-card">
        <div class="alert alert-error">
            <strong>⚠️ Advertencia:</strong>
            <p>Estás a punto de eliminar permanentemente la cita del <strong>{{ appointment.date_time|date:"d/m/Y H:i" }}</strong> para <strong>{{ patient.full_name }}</strong>.</p>
            <p>Esta acción no se puede deshacer.</p>
        </div>
        
        <div class="patient-summary">
            <h3>Información de la Cita a Eliminar</h3>
            <div class="detail-item">
                <strong>Paciente:</strong>
                <span>{{ patient.full_name }}</span>
            </div>
            <div class="detail-item">
                <strong>Fecha y Hora:</strong>
                <span>{{ appointment.date_time|date:"d/m/Y H:i" }}</span>
            </div>
            <div class="detail-item">
                <strong>Test PERFECT:</strong>
                <span class="perfect-summary-badge">
                    P:{{ appointment.perfect_p_power|default:"?" }} E:{{ appointment.perfect_e_endurance|default:"?" }} R:{{ appointment.perfect_r_repetitions|default:"?" }} F:{{ appointment.perfect_f_fast|default:"?" }}
                </span>
            </div>
            <div class="detail-item">
                <strong>Descripción:</strong>
                <span>{{ appointment.session_description|truncatewords:15 }}</span>
            </div>
            <div class="detail-item">
                <strong>Creada:</strong>
                <span>{{ appointment.created_at|date:"d/m/Y H:i" }}</span>
            </div>
        </div>
        
        <form method="post" class="delete-form">
            {% csrf_token %}
            <div class="form-actions-normal">
                <button type="submit" class="btn btn-danger">
                    Sí, Eliminar Cita
                </button>
                <a href="{% url 'patient_detail' patient.pk %}" class="btn btn-secondary">
                    Cancelar
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}